"use strict";(self.webpackChunkapp_banco=self.webpackChunkapp_banco||[]).push([[844],{7844:(A,g,o)=>{o.r(g),o.d(g,{BankModule:()=>w});var u=o(9862),r=o(6814),l=o(11),h=o(3519),m=o.n(h),t=o(4769);const d_BASE_URL="https://sandbox.belvo.com/api";let f=(()=>{class i{constructor(n){this.http=n}getBanks(){return this.http.get(`${d_BASE_URL}/institutions/`)}createLinksBanks(n){return this.http.post(`${d_BASE_URL}/links/`,n)}listTransactions(n){return this.http.get(`${d_BASE_URL}/transactions/?page=1&link=${n}`)}static#t=this.\u0275fac=function(e){return new(e||i)(t.LFG(u.eN))};static#n=this.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function x(i,c){1&i&&t._UZ(0,"img",2)}function _(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){const a=t.CHM(n).$implicit,p=t.oxw(2);return t.KtG(p.showBank(a.name,a.display_name))}),t.TgZ(1,"article",5)(2,"span"),t._uU(3),t.qZA(),t._UZ(4,"img",6),t.qZA()()}if(2&i){const n=c.$implicit;t.xp6(3),t.hij(" ",n.display_name,""),t.xp6(1),t.Q6J("src",n.logo,t.LSH)}}function v(i,c){if(1&i&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Lista de Bancos"),t.qZA(),t.YNc(3,_,5,2,"div",3),t.qZA()),2&i){const n=t.oxw();t.xp6(3),t.Q6J("ngForOf",n.bankList)}}let k=(()=>{class i{constructor(n,e){this.serviceBank=n,this.rutaActiva=e,this.bankList=[],this.lisTransaction=[],this.isLoading=!0,this.isLoadingCard=!1,this.selectedCardIndex=-1}ngOnInit(){this.serviceBank.getBanks().subscribe({next:n=>{this.isLoading=!1,this.bankList=n.results}})}showBank(n,e){this.isLoading=!0,this.serviceBank.createLinksBanks({institution:n,username:"bnk100",password:"full"}).subscribe({next:a=>{this.isLoading=!1,this.rutaActiva.navigate(["/bank/details",a.id,e])},error:a=>{this.isLoading=!1,m().fire({title:"Error!",text:"Tenemos problemas en estos momentos",icon:"error",confirmButtonText:"Cerrar"})}})}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(f),t.Y36(l.F0))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-list-bank"]],decls:2,vars:2,consts:[["src","../../../../assets/icons/Infinity-1s-200px.svg","alt","","class","loadin-icon",4,"ngIf"],[4,"ngIf"],["src","../../../../assets/icons/Infinity-1s-200px.svg","alt","",1,"loadin-icon"],["class","container",3,"click",4,"ngFor","ngForOf"],[1,"container",3,"click"],[1,"bank"],["alt","",1,"logo",3,"src"]],template:function(e,s){1&e&&(t.YNc(0,x,1,0,"img",0),t.YNc(1,v,4,1,"div",1)),2&e&&(t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("ngIf",!s.isLoading))},dependencies:[r.sg,r.O5],styles:[".container[_ngcontent-%COMP%]{margin:0 auto 12px;width:700px;height:132px;padding:10px;box-shadow:0 10px 15px -3px #0000001a}.container[_ngcontent-%COMP%]:hover{background-color:#f6f2f2;cursor:pointer}.bank[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px;position:relative}.logo[_ngcontent-%COMP%]{max-width:200px}.loadin-icon[_ngcontent-%COMP%]{width:80px;position:absolute;left:50%;top:50%}.logo-container[_ngcontent-%COMP%]{width:50px;position:absolute;left:50%;top:55%}"]})}return i})();var b=o(9303);function B(i,c){1&i&&t._UZ(0,"img",2)}function C(i,c){if(1&i&&(t.TgZ(0,"div",7)(1,"div",5),t._uU(2),t.ALo(3,"currency"),t.qZA(),t.TgZ(4,"div",5),t._uU(5),t.qZA(),t.TgZ(6,"div",5),t._uU(7),t.qZA(),t.TgZ(8,"div",5),t._uU(9),t.qZA()()),2&i){const n=c.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,4,n.amount)),t.xp6(3),t.Oqu(n.value_date),t.xp6(2),t.Oqu(n.type),t.xp6(2),t.Oqu(n.currency)}}function L(i,c){if(1&i&&(t.TgZ(0,"div")(1,"h2"),t._uU(2),t.qZA(),t._uU(3),t._UZ(4,"br")(5,"br"),t.TgZ(6,"div",3)(7,"div",4)(8,"div",5)(9,"b"),t._uU(10,"Monto"),t.qZA()(),t.TgZ(11,"div",5)(12,"b"),t._uU(13,"Fecha"),t.qZA()(),t.TgZ(14,"div",5)(15,"b"),t._uU(16,"Tipo"),t.qZA()(),t.TgZ(17,"div",5)(18,"b"),t._uU(19,"Moneda"),t.qZA()()(),t.YNc(20,C,10,6,"div",6),t.qZA()()),2&i){const n=t.oxw();t.xp6(2),t.Oqu(n.title),t.xp6(1),t.hij(" KPI : ",n.balance," "),t.xp6(17),t.Q6J("ngForOf",n.resultsTotal)}}let Z=(()=>{class i{constructor(n,e){this.rutaActiva=n,this.serviceBank=e,this.isLoading=!1,this.title="",this.resultsTotal=[]}ngOnInit(){this.rutaActiva.params.subscribe({next:n=>{this.title=n.info,this.viewBalance(n.id)}})}viewBalance(n){this.isLoading=!0,this.serviceBank.listTransactions(n).subscribe({next:e=>{this.handleResponse(e,n)}})}handleResponse(n,e){if(n.count<1)this.serviceBank.listTransactions(e).pipe((0,b.g)(6e3)).subscribe({next:s=>{this.handleResponse(s,e)}});else{this.resultsTotal=n.results,this.isLoading=!1;let s=0,a=0;n.results.forEach(p=>{"INFLOW"===p.type?s+=p.amount:"OUTFLOW"===p.type&&(a+=p.amount)}),this.balance=s-a}}static#t=this.\u0275fac=function(e){return new(e||i)(t.Y36(l.gz),t.Y36(f))};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-details-bank"]],decls:2,vars:2,consts:[["src","../../../../assets/icons/Infinity-1s-200px.svg","alt","","class","loadin-icon",4,"ngIf"],[4,"ngIf"],["src","../../../../assets/icons/Infinity-1s-200px.svg","alt","",1,"loadin-icon"],[1,"tabla"],[1,"fila-header"],[1,"celda"],["class","fila",4,"ngFor","ngForOf"],[1,"fila"]],template:function(e,s){1&e&&(t.YNc(0,B,1,0,"img",0),t.YNc(1,L,21,3,"div",1)),2&e&&(t.Q6J("ngIf",s.isLoading),t.xp6(1),t.Q6J("ngIf",!s.isLoading))},dependencies:[r.sg,r.O5,r.H9],styles:[".tabla[_ngcontent-%COMP%]{display:grid;box-shadow:0 10px 15px -3px #0000001a}.fila-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);box-shadow:0 10px 15px -3px #0000001a}.fila[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);padding:15px;box-shadow:0 10px 15px -3px #0000001a}.celda[_ngcontent-%COMP%]{padding:10px;text-align:center}.loadin-icon[_ngcontent-%COMP%]{width:80px;position:absolute;left:50%;top:50%}"]})}return i})();function T(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"div",7)(1,"span",8),t.NdJ("click",function(){t.CHM(n);const s=t.oxw();return t.KtG(s.logout())}),t._uU(2,"Cerrar Sesi\xf3n"),t.qZA()()}}const O=[{path:"",component:(()=>{class i{constructor(){this.userNameLogin="",this.router=(0,t.f3M)(l.F0),this.showLogout=!1}ngOnInit(){let n=localStorage.getItem("user");this.userNameLogin=n}toggleLogoutButton(){this.showLogout=!this.showLogout}logout(){localStorage.removeItem("token"),this.showLogout=!1,this.router.navigate(["auth"])}static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-bank-page"]],decls:11,vars:2,consts:[[1,"header"],["routerLink","bank/",1,"home"],[1,"container-info"],[1,"container-img"],["src","../../../../assets/icons/Individual-modified.svg","alt","",1,"icon",3,"click"],["class","cerrar-sesion",4,"ngIf"],[1,"container"],[1,"cerrar-sesion"],[3,"click"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"span",1),t._uU(2," Home "),t.qZA(),t.TgZ(3,"div",2)(4,"span"),t._uU(5),t.qZA(),t.TgZ(6,"div",3)(7,"img",4),t.NdJ("click",function(){return s.toggleLogoutButton()}),t.qZA(),t.YNc(8,T,3,0,"div",5),t.qZA()()(),t.TgZ(9,"div",6),t._UZ(10,"router-outlet"),t.qZA()),2&e&&(t.xp6(5),t.Oqu(s.userNameLogin||"No UserName"),t.xp6(3),t.Q6J("ngIf",s.showLogout))},dependencies:[r.O5,l.lC,l.rH],styles:[".header[_ngcontent-%COMP%]{background-color:#3838ff;width:100%;height:50px;position:absolute;top:0;left:0;display:flex;justify-content:space-between;align-items:center;margin-bottom:10px}.icon[_ngcontent-%COMP%]{width:100px;height:50px;cursor:pointer}.container-info[_ngcontent-%COMP%]{color:#fff;display:flex;align-items:center;font-family:Open Sans,sans-serif}.container[_ngcontent-%COMP%]{margin-top:88px;font-family:Open Sans,sans-serif}.home[_ngcontent-%COMP%]{color:#fff;font-size:22px;margin-left:18px;cursor:pointer;font-family:Open Sans,sans-serif}.container-img[_ngcontent-%COMP%]{position:relative}.cerrar-sesion[_ngcontent-%COMP%]{position:absolute;top:54px;background-color:#3838ff;color:#fff;width:100px;border-radius:10px;text-align:center;cursor:pointer}"]})}return i})(),children:[{path:"list",component:k},{path:"details/:id/:info",component:Z},{path:"**",redirectTo:"list",pathMatch:"full"}]}];let y=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[l.Bz.forChild(O),l.Bz]})}return i})(),w=(()=>{class i{static#t=this.\u0275fac=function(e){return new(e||i)};static#n=this.\u0275mod=t.oAB({type:i});static#i=this.\u0275inj=t.cJS({imports:[r.ez,y,u.JF]})}return i})()}}]);